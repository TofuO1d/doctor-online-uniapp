import{a7 as e,a4 as t,o as a,a as o,w as i,r,i as s,a8 as n,n as d,f as l,g as c,t as p,A as u,h as A,l as f}from"./index-0333b418.js";import{_ as g}from"./_plugin-vue_export-helper.1b428a4d.js";import{r as h}from"./uni-app.es.6fb9258e.js";const m="load",v="error";const y=g({name:"AdInteractive",props:{options:{type:[Object,Array],default:()=>({})},disabled:{type:[Boolean,String],default:!1},adpid:{type:[Number,String],default:""},openType:{type:String,default:"interactive"},openPagePath:{type:String,default:""}},data:()=>({adData:null,loading:!1,errorMessage:""}),created(){this._interactiveUrl=null,this.openPagePath&&this.getAdData()},methods:{getAdData(){this.adpid?(this.loading=!0,e({url:"https://wxac1.dcloud.net.cn/openPage/acs",method:"POST",data:{adpid:this.adpid},timeout:5e3,dataType:"json",success:e=>{if(200!==e.statusCode)return void this.$emit(v,{errCode:e.statusCode,errMsg:e.statusCode});const t=e.data;if(0===t.ret)this._interactiveUrl=t.data.adp_url,this.adData={imgUrl:t.data.icon_url,openPath:this.openPagePath+"?url="+encodeURIComponent(this._interactiveUrl)},this.$emit(m,this.adData);else{const e={errCode:t.ret,errMsg:t.msg};this.errorMessage=e,this.$emit(v,e)}},fail:e=>{this.$emit(v,{errCode:"",errMsg:e.errMsg})},complete:()=>{this.loading=!1}})):this.$emit(v,{code:-5002,message:"invalid adpid"})},onclick(){this.disabled||this._interactiveUrl&&(t({url:this.adData.openPath}),this._report())},_report(){e({url:"https://wxac1.dcloud.net.cn/openPage/acs",data:{adpid:this.adpid,t:"10019"},timeout:5e3,dataType:"json"})}}},[["render",function(e,t,n,d,l,c){const p=s;return a(),o(p,{onClick:c.onclick},{default:i((()=>[r(e.$slots,"default",{options:n.options,data:l.adData,loading:l.loading,error:l.errorMessage},void 0,!0)])),_:3},8,["onClick"])}],["__scopeId","data-v-59b4f397"]]);var w={getWeixinCode:function(){return new Promise(((e,t)=>{}))},getAlipayCode:function(){},checkPlatform:function(){let e={win:!1,mac:!1,xll:!1},t=navigator.platform;if(e.win=0==t.indexOf("Win"),e.mac=0==t.indexOf("Mac"),e.x11="X11"==t||0==t.indexOf("Linux"),e.win||e.mac||e.xll){return navigator.userAgent.toLowerCase().indexOf("micromessenger")>-1?"pc-weixin":"pc"}return t.indexOf("iPhone")>-1||t.indexOf("iPad")>-1?"ios":"android"},getH5Env:function(){let e=window.navigator.userAgent.toLowerCase();return"micromessenger"==e.match(/MicroMessenger/i)&&"miniprogram"==e.match(/miniprogram/i)?"mp-weixin":"micromessenger"==e.match(/MicroMessenger/i)?"h5-weixin":"alipay"==e.match(/alipay/i)&&"miniprogram"==e.match(/miniprogram/i)?"mp-alipay":"alipay"==e.match(/alipay/i)?"h5-alipay":"h5"},timeFormat:function(e,t="yyyy-MM-dd hh:mm:ss",a=8){try{if(!e)return"";let o;"string"!=typeof e||isNaN(e)||(e=Number(e)),"number"==typeof e?(10==e.toString().length&&(e*=1e3),o=new Date(e)):o=e;const i=60*o.getTimezoneOffset()*1e3+60*a*60*1e3,r=o.getTime()+i;o=new Date(r);let s={"M+":o.getMonth()+1,"d+":o.getDate(),"h+":o.getHours(),"m+":o.getMinutes(),"s+":o.getSeconds(),"q+":Math.floor((o.getMonth()+3)/3),S:o.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(o.getFullYear()+"").substr(4-RegExp.$1.length)));for(let e in s)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?s[e]:("00"+s[e]).substr((""+s[e]).length)));return t}catch(o){return e}}};const C=g({data:()=>({options:{adpid:"",main_color:"",order_no:"",out_trade_no:"",total_fee:"",pay_date:"",return_url:""},images:{success:"data:image/png;base64,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"},color:{wxpay:"#01be6e",alipay:"#108ee9"}}),onLoad(e={}){this.options=e},onReady(){},onShow(){},onHide(){},methods:{timeFormat:w.timeFormat,queryOrder(){let e=this.options.return_url+`?out_trade_no=${this.options.out_trade_no}&order_no=${this.options.order_no}`;0!==e.indexOf("/")&&(e=`/${e}`),t({url:e})},onaderror(e){console.log("ad-error",e)}},watch:{mainColorCom:{immediate:!0,handler(e,t){setTimeout((function(){n({frontColor:"#ffffff",backgroundColor:e})}),0)}}},computed:{mainColorCom(){let e="";return e=this.options.main_color||this.color.wxpay,e},styleCom(){return`--main:${this.mainColorCom};`}}},[["render",function(e,t,r,n,g,m){const v=A,w=s,C=h(f("ad-interactive"),y);return a(),o(w,{class:"app",style:d(m.styleCom)},{default:i((()=>[l(w,{class:"header"},{default:i((()=>[l(v,{src:g.images.success,class:"success-image"},null,8,["src"]),l(w,{class:"success-title"},{default:i((()=>[c("支付成功")])),_:1}),l(w,{class:"hr"})])),_:1}),l(w,{class:"info-box"},{default:i((()=>[l(w,{class:"info-amount"},{default:i((()=>[c("¥ "+p((g.options.total_fee/100).toFixed(2)),1)])),_:1}),l(w,{class:"left-circle"}),l(w,{class:"right-circle"}),l(w,{class:"info-main"},{default:i((()=>[l(w,{class:"info-cell"},{default:i((()=>[l(w,{class:"left"},{default:i((()=>[c("订单编号")])),_:1}),l(w,{class:"right"},{default:i((()=>[c(p(g.options.order_no),1)])),_:1})])),_:1}),l(w,{class:"info-cell"},{default:i((()=>[l(w,{class:"left"},{default:i((()=>[c("付款时间")])),_:1}),l(w,{class:"right"},{default:i((()=>[c(p(m.timeFormat(g.options.pay_date,"yyyy-MM-dd hh:mm:ss")),1)])),_:1})])),_:1})])),_:1})])),_:1}),l(w,{class:"uni-ad"},{default:i((()=>[g.options.adpid?(a(),o(C,{key:0,adpid:g.options.adpid,"open-page-path":"/uni_modules/uni-pay/pages/ad-interactive-webview/ad-interactive-webview",onError:m.onaderror},{default:i((({data:e,loading:t,error:r})=>[e?(a(),o(w,{key:0,class:"ad-interactive"},{default:i((()=>[l(v,{src:e.imgUrl,mode:"widthFix"},null,8,["src"])])),_:2},1024)):u("",!0)])),_:1},8,["adpid","onError"])):u("",!0)])),_:1}),g.options.return_url?(a(),o(w,{key:0,class:"button-query",onClick:m.queryOrder},{default:i((()=>[c("查看订单")])),_:1},8,["onClick"])):u("",!0),l(w,{class:"footer-hr"})])),_:1},8,["style"])}],["__scopeId","data-v-b830d293"]]);export{C as default};
