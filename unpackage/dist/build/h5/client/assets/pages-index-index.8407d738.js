import{c as e,o as s,a,w as l,r as t,n as c,u as o,i as r,b as n,d as u,F as i,e as d,f,g as p,t as _,h as m,j as v,k,l as y,m as g,S as b,p as h,q as w,s as q,v as x,x as j,I as C,y as T,z as F,A as I}from"./index-0333b418.js";import{_ as M}from"./uni-icons.306a74c1.js";import{r as N}from"./uni-app.es.6fb9258e.js";import{_ as S}from"./custom-tabs.b8b80733.js";import{_ as A}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as z}from"./scroll-page.1487e938.js";import{f as D,a as E,d as H}from"./doctor.5a50874c.js";import{_ as P}from"./doctor-avatar.3b2a5d36.js";import"./http.dd4042ae.js";const R=A({__name:"custom-sticky",props:{offsetTop:{type:[String,Number],default:0},backgroundColor:{type:String,default:"#fff"}},setup(n){const u=n,i=e((()=>({paddingTop:u.offsetTop,backgroundColor:u.backgroundColor})));return(e,n)=>{const u=r;return s(),a(u,{style:c(o(i)),class:"custom-sticky"},{default:l((()=>[t(e.$slots,"default",{},void 0,!0)])),_:3},8,["style"])}}},[["__scopeId","data-v-624e67fd"]]),U=A({__name:"feed-list",props:{list:Array},setup(e){const t=e;return n((()=>{console.log("mounted...")})),(e,c)=>{const o=m,n=v,y=r,g=k;return s(),a(y,{class:"feed-list"},{default:l((()=>[(s(!0),u(i,null,d(t.list,(e=>(s(),a(y,{key:e.id,class:"feed-list-item"},{default:l((()=>[f(y,{class:"feed-meta"},{default:l((()=>[f(o,{class:"doctor-avatar",src:P}),f(y,{class:"doctor-info"},{default:l((()=>[f(n,{class:"name"},{default:l((()=>[p(_(e.creatorName),1)])),_:2},1024),f(n,{class:"desc"},{default:l((()=>[p(_(e.creatorHospatalName)+" "+_(e.creatorDep)+" "+_(e.creatorTitles),1)])),_:2},1024)])),_:2},1024),1===e.likeFlag?(s(),a(g,{key:0,class:"doctor-button",plain:""},{default:l((()=>[p(" 已关注 ")])),_:1})):(s(),a(g,{key:1,class:"doctor-button",plain:""},{default:l((()=>[p("+ 关注")])),_:1}))])),_:2},1024),f(y,{class:"feed-topic"},{default:l((()=>[p(_(e.title),1)])),_:2},1024),f(y,{class:"feed-relation"},{default:l((()=>[p("# "+_(e.topic),1)])),_:2},1024),f(y,{class:"feed-content"},{default:l((()=>[f(y,{class:"text"},{default:l((()=>[p(_(e.content),1)])),_:2},1024),f(y,{class:"picture"},{default:l((()=>[(s(!0),u(i,null,d(e.coverUrl,(e=>(s(),a(o,{mode:"aspectFill",class:"uni-image",src:e},null,8,["src"])))),256))])),_:2},1024)])),_:2},1024),f(y,{class:"feed-extra"},{default:l((()=>[f(n,null,{default:l((()=>[p("12 收藏")])),_:1}),f(n,null,{default:l((()=>[p("120 评论")])),_:1})])),_:1})])),_:2},1024)))),128))])),_:1})}}},[["__scopeId","data-v-0eb9fffc"]]),Y=A({__name:"doctor-list",props:{list:Array},setup:e=>(t,c)=>{const o=v,n=g,h=N(y("uni-icons"),M),w=r,q=m,x=k,j=b;return s(),a(w,{class:"doctor-list"},{default:l((()=>[f(w,{class:"doctor-list-header"},{default:l((()=>[f(o,{class:"title"},{default:l((()=>[p("推荐关注")])),_:1}),f(n,{"hover-class":"none",url:" ",class:"more"},{default:l((()=>[p("查看更多")])),_:1}),f(h,{color:"#c3c3c5",type:"forward"})])),_:1}),f(j,{"scroll-x":"","show-scrollbar":!1},{default:l((()=>[f(w,{class:"doctor-list-wrapper"},{default:l((()=>[(s(!0),u(i,null,d(e.list,((e,t)=>(s(),a(w,{key:e.id,class:"doctor-list-item"},{default:l((()=>[f(q,{class:"doctor-avatar",src:e.avatar},null,8,["src"]),f(w,{class:"name"},{default:l((()=>[p(_(e.name),1)])),_:2},1024),f(w,{class:"unit"},{default:l((()=>[p(_(e.hospitalName)+" "+_(e.depName),1)])),_:2},1024),f(w,{class:"level"},{default:l((()=>[p(_(e.positionalTitles),1)])),_:2},1024),1===e.likeFlag?(s(),a(x,{key:0,class:"follow"},{default:l((()=>[p("已关注")])),_:1})):(s(),a(x,{key:1,onClick:s=>async function(e){const{code:s,data:a,message:l}=await D(e.id);if(1e4!==s)return uni.utils.toast(l);e.likeFlag=1}(e),class:"follow"},{default:l((()=>[p(" + 关注 ")])),_:2},1032,["onClick"]))])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})}},[["__scopeId","data-v-79820961"]]),$=A({__name:"index",setup(t){const{safeAreaInsets:n}=h(),_=w(0),k=q([{label:"推荐",type:"recommend",current:1,list:[],hasMore:!0,rendered:!0},{label:"关注",type:"like",current:1,list:[],hasMore:!0,rendered:!1},{label:"减脂",type:"fatReduction",current:1,list:[],hasMore:!0,rendered:!1},{label:"饮食",type:"food",current:1,list:[],hasMore:!0,rendered:!1}]),b=e((()=>k[_.value].type)),A=e((()=>k[_.value].current)),D=w(5),P=w([]);function $({index:e}){_.value=e,k[e].rendered||G(),k[e].rendered=!0}function B(){k[_.value].hasMore&&G()}async function G(){const{code:e,data:s,message:a}=await E({type:b.value,current:A.value,pageSize:D.value});if(1e4!==e)return uni.utils.toast(a);s.rows.forEach((e=>{e.content=e.content.replace(/<[^>]+>/g,"")}));const l=k[_.value].list;k[_.value].list=[...l,...s.rows];const t=k[_.value].current;k[_.value].current=t+1,k[_.value].hasMore=t+1<=s.pageTotal}return G(),async function(){const{code:e,data:s,message:a}=await H();if(1e4!==e)return uni.utils.toast(a);P.value=s.rows}(),(e,t)=>{const h=r,w=C,q=N(y("uni-icons"),M),A=m,D=v,E=g,H=T,G=F,J=N(y("custom-tabs"),S),K=N(y("custom-sticky"),R),L=N(y("scroll-page"),z);return s(),a(L,{onScrolltolower:B},{default:l((()=>[f(h,{class:"index-page",style:c({backgroundPositionY:-48+o(n).top+"px"})},{default:l((()=>[f(h,{style:c({paddingTop:o(n).top+"px"}),class:"page-navbar"},{default:l((()=>[p(" 优医 ")])),_:1},8,["style"]),f(h,{class:"search-bar"},{default:l((()=>[f(w,{"placeholder-class":"input-placeholder",placeholder:"搜一搜: 疾病/症状/医生/健康知识",class:"input",type:"text"}),f(h,{class:"icon-search"},{default:l((()=>[f(q,{size:"22",color:"#C3C3C5",type:"search"})])),_:1})])),_:1}),f(h,{class:"quick-entry"},{default:l((()=>[f(E,{"hover-class":"none",class:"quick-entry-item"},{default:l((()=>[f(A,{class:"quick-entry-icon",src:"/assets/quick-entry-1-2a0de1e6.png"}),f(D,{class:"label"},{default:l((()=>[p("问医生")])),_:1}),f(D,{class:"small"},{default:l((()=>[p("按科室查问医生")])),_:1})])),_:1}),f(E,{"hover-class":"none",class:"quick-entry-item",url:"/subpkg_consult/quickly/index?type=2"},{default:l((()=>[f(A,{class:"quick-entry-icon",src:"/assets/quick-entry-2-c46027b8.png"}),f(D,{class:"label"},{default:l((()=>[p("极速问诊")])),_:1}),f(D,{class:"small"},{default:l((()=>[p("20s医生极速回复")])),_:1})])),_:1}),f(E,{"hover-class":"none",class:"quick-entry-item"},{default:l((()=>[f(A,{class:"quick-entry-icon",src:"/assets/quick-entry-3-01ac1c62.png"}),f(D,{class:"label"},{default:l((()=>[p("开药门诊")])),_:1}),f(D,{class:"small"},{default:l((()=>[p("线上买药更方便")])),_:1})])),_:1})])),_:1}),f(h,{class:"quick-view"},{default:l((()=>[f(E,{"hover-class":"none",class:"quick-view-item",url:"/subpkg_medicine/order_list/index"},{default:l((()=>[f(A,{class:"quick-view-icon",src:"/assets/quick-view-1-b98a0d6e.png"}),f(D,{class:"label"},{default:l((()=>[p("药品订单")])),_:1})])),_:1}),f(E,{"hover-class":"none",class:"quick-view-item",url:"/subpkg_archive/list/index"},{default:l((()=>[f(A,{class:"quick-view-icon",src:"/assets/quick-view-2-9826af9f.png"}),f(D,{class:"label"},{default:l((()=>[p("健康档案")])),_:1})])),_:1}),f(E,{"hover-class":"none",class:"quick-view-item"},{default:l((()=>[f(A,{class:"quick-view-icon",src:"/assets/quick-view-3-7aca828d.png"}),f(D,{class:"label"},{default:l((()=>[p("我的处方")])),_:1})])),_:1}),f(E,{"hover-class":"none",class:"quick-view-item"},{default:l((()=>[f(A,{class:"quick-view-icon",src:"/assets/quick-view-4-12574478.png"}),f(D,{class:"label"},{default:l((()=>[p("疾病查询")])),_:1})])),_:1})])),_:1}),f(h,{class:"banner-placeholder"},{default:l((()=>[f(G,{class:"uni-swiper","indicator-dots":"","indicator-color":"#ffffff99","indicator-active-color":"#fff",circular:""},{default:l((()=>[f(H,null,{default:l((()=>[f(E,{"hover-class":"none",class:"navigator",url:" "},{default:l((()=>[f(A,{class:"banner-image",src:"/assets/banner-1-c4ee3bf4.png"})])),_:1})])),_:1}),f(H,null,{default:l((()=>[f(E,{"hover-class":"none",class:"navigator",url:" "},{default:l((()=>[f(A,{class:"banner-image",src:"/assets/banner-1-c4ee3bf4.png",mode:"aspectFill"})])),_:1})])),_:1})])),_:1})])),_:1}),f(h,{class:"doctor-feeds",style:c({marginTop:-o(n).top+"px"})},{default:l((()=>[f(K,{"offset-top":o(n).top+"px"},{default:l((()=>[f(J,{onClick:$,list:k},null,8,["list"])])),_:1},8,["offset-top"])])),_:1},8,["style"]),x(f(Y,{list:P.value},null,8,["list"]),[[j,"recommend"===o(b)]]),(s(!0),u(i,null,d(k,((e,t)=>x((s(),a(h,{key:e.type},{default:l((()=>[e.rendered?(s(),a(U,{key:0,list:e.list},null,8,["list"])):I("",!0)])),_:2},1024)),[[j,_.value===t]]))),128))])),_:1},8,["style"])])),_:1})}}},[["__scopeId","data-v-965bed83"]]);export{$ as default};
