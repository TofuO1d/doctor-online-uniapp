import{_ as t}from"./custom-tabs.b8b80733.js";import{q as e,l as s,o as a,a as l,w as u,f as o,d as r,F as n,e as c,g as i,t as d,A as f,u as _,h as p,j as m,i as y,m as b,k as v,S as g,s as k,v as h,x}from"./index-0333b418.js";import{r as j}from"./uni-app.es.6fb9258e.js";import"./http.dd4042ae.js";import{a as w,b as C}from"./uni-list.cc31cbe4.js";import{_ as I}from"./uni-load-more.29a05208.js";import{a as S}from"./consult.38902923.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";import"./uni-icons.306a74c1.js";const q=T({__name:"order-list",props:{type:{type:Number,default:1}},setup(t){const k=t,h=e(1),x=e([]),T=e("loading"),q=e(!0),z=e(!1),D=function(t,e=500){let s;return(...a)=>{clearTimeout(s),s=setTimeout((()=>{t(...a)}),e)}}((()=>{q.value&&F()}),400);async function A(){h.value=1,x.value=[],z.value=!0,await F(),z.value=!1}async function F(){T.value="loading";const{code:t,data:e,message:s}=await S({type:k.type,current:h.value,pageSize:5});if(1e4!==t)return uni.utils.toast(s);x.value=[...x.value,...e.rows],h.value++,q.value=h.value<=e.pageTotal,T.value=q.value?"more":"noMore"}return F(),(t,e)=>{const k=p,h=m,S=y,q=j(s("uni-list-item"),w),F=j(s("uni-list"),C),G=b,M=v,N=j(s("uni-load-more"),I),R=g;return a(),l(R,{"refresher-enabled":"","refresher-triggered":z.value,onRefresherrefresh:A,onScrolltolower:_(D),"refresher-background":"#f6f6f6",class:"uni-scroll-view","scroll-y":""},{default:u((()=>[o(S,{class:"consult-list"},{default:u((()=>[(a(!0),r(n,null,c(x.value,(t=>(a(),l(S,{key:t.id,class:"consult-list-item"},{default:u((()=>[o(S,{class:"consult-header"},{default:u((()=>[o(S,{class:"label"},{default:u((()=>[o(k,{class:"doctor-avatar",src:t.docInfo.avatar},null,8,["src"]),o(h,null,{default:u((()=>[i(d(t.typeValue)+"（自动分配医生）",1)])),_:2},1024)])),_:2},1024),1===t.status?(a(),l(h,{key:0,class:"status color-1"},{default:u((()=>[i("待支付")])),_:1})):f("",!0),2===t.status?(a(),l(h,{key:1,class:"status color-2"},{default:u((()=>[i("待接诊")])),_:1})):f("",!0),3===t.status?(a(),l(h,{key:2,class:"status color-2"},{default:u((()=>[i("咨询中")])),_:1})):f("",!0),4===t.status?(a(),l(h,{key:3,class:"status color-3"},{default:u((()=>[i("已完成")])),_:1})):f("",!0),5===t.status?(a(),l(h,{key:4,class:"status color-3"},{default:u((()=>[i("已取消")])),_:1})):f("",!0)])),_:2},1024),o(G,{class:"consult-body","hover-class":"none",url:`/subpkg_consult/order_detail/index?id=${t.id}`},{default:u((()=>[o(F,{border:!1},{default:u((()=>[o(q,{border:!1,title:"病情描述","right-text":t.illnessDesc},null,8,["right-text"]),o(q,{border:!1,title:"价格","right-text":"¥"+t.payment},null,8,["right-text"]),o(q,{border:!1,title:"创建时间","right-text":t.createTime},null,8,["right-text"])])),_:2},1024)])),_:2},1032,["url"]),1===t.status?(a(),l(S,{key:0,class:"consult-footer"},{default:u((()=>[o(M,{class:"uni-button minor"},{default:u((()=>[i("取消订单")])),_:1}),o(M,{class:"uni-button"},{default:u((()=>[i("去支付")])),_:1})])),_:1})):f("",!0),2===t.status?(a(),l(S,{key:1,class:"consult-footer"},{default:u((()=>[o(M,{class:"uni-button minor"},{default:u((()=>[i("取消订单")])),_:1}),o(M,{class:"uni-button"},{default:u((()=>[i("继续咨询")])),_:1})])),_:1})):f("",!0),3===t.status?(a(),l(S,{key:2,class:"consult-footer"},{default:u((()=>[o(M,{class:"uni-button"},{default:u((()=>[i("继续咨询")])),_:1})])),_:1})):f("",!0),4===t.status?(a(),l(S,{key:3,class:"consult-footer"},{default:u((()=>[o(M,{class:"uni-button minor"},{default:u((()=>[i("问诊记录")])),_:1}),t.evaluateId?(a(),l(M,{key:0,class:"uni-button minor"},{default:u((()=>[i(" 查看评价 ")])),_:1})):(a(),l(M,{key:1,class:"uni-button"},{default:u((()=>[i("去评价")])),_:1}))])),_:2},1024)):f("",!0),5===t.status?(a(),l(S,{key:4,class:"consult-footer"},{default:u((()=>[o(M,{class:"uni-button minor"},{default:u((()=>[i("删除订单")])),_:1}),o(M,{class:"uni-button"},{default:u((()=>[i("咨询其它医生")])),_:1})])),_:1})):f("",!0)])),_:2},1024)))),128)),o(N,{status:T.value,color:"#C3C3C5","icon-size":16,"content-text":{contentdown:"上拉显示更多",contentrefresh:"数据正在加载中...",contentnomore:"没有更多数据了"}},null,8,["status","content-text"])])),_:1})])),_:1},8,["refresher-triggered","onScrolltolower"])}}},[["__scopeId","data-v-5b41d314"]]),z=T({__name:"index",setup(i){const d=e(0),_=k([{label:"问医生",type:1,rendered:!0},{label:"极速问诊",type:2,rendered:!1},{label:"开药问诊",type:3,rendered:!1}]);function p({index:t}){d.value=t,_[t].rendered=!0}return(e,i)=>{const m=j(s("custom-tabs"),t),b=y;return a(),l(b,{class:"consult-page"},{default:u((()=>[o(b,{class:"consult-status-tabs"},{default:u((()=>[o(m,{onClick:p,list:_},null,8,["list"])])),_:1}),(a(!0),r(n,null,c(_,((t,e)=>h((a(),l(b,{key:t.type},{default:u((()=>[t.rendered?(a(),l(q,{key:0,type:t.type},null,8,["type"])):f("",!0)])),_:2},1024)),[[x,d.value===e]]))),128))])),_:1})}}},[["__scopeId","data-v-aa0f3a4f"]]);export{z as default};
