"use strict";const e=require("../../common/vendor.js"),i=require("../../services/patient.js");if(require("../../utils/http.js"),require("../../stores/user.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("uni-swipe-action-item")+e.resolveComponent("uni-swipe-action")+e.resolveComponent("scroll-page"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item.js")+(()=>"../../uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action.js")+(()=>"../../components/scroll-page/scroll-page.js"))();const n={__name:"index",setup(n){const o=e.ref(!1),t=e.ref([]),s=e.ref([{text:"删除",style:{backgroundColor:"#dd524d"}}]);return e.onShow((()=>{!async function(){const{code:n,data:s}=await i.patientListApi();if(1e4!==n)return e.index.utils.showToast("列表获取失败，稍后重试!");t.value=s,o.value=!0}()})),(n,a)=>e.e({a:o.value},o.value?e.e({b:e.f(t.value,((n,o,s)=>e.e({a:e.t(n.name),b:e.t(n.idCard.replace(/^(.{6}).+(.{4})$/,"$1********$2")),c:1===n.defaultFlag},(n.defaultFlag,{}),{d:e.t(n.genderValue),e:e.t(n.age),f:"6480c359-3-"+s+",6480c359-2-"+s,g:`/subpkg_archive/form/index?id=${n.id}`,h:1===n.defaultFlag?1:"",i:n.id,j:e.o((s=>async function(n,o){const{code:s,message:a}=await i.removePatientApi(n);if(1e4!==s)return e.index.utils.toast(a);t.value.splice(o,1)}(n.id,o)),n.id),k:"6480c359-2-"+s+",6480c359-1"}))),c:e.p({type:"icon-edit",size:"20",color:"#16C2A3","custom-prefix":"iconfont"}),d:e.p({"right-options":s.value})},{e:e.p({color:"#16C2A3",size:"24",type:"plusempty"})}):{})}};wx.createPage(n);
