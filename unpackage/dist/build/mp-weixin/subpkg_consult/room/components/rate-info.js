"use strict";const e=require("../../../common/vendor.js"),o=require("../../../services/doctor.js");if(require("../../../utils/http.js"),require("../../../stores/user.js"),!Array){(e.resolveComponent("uni-rate")+e.resolveComponent("uni-easyinput")+e.resolveComponent("uni-icons"))()}Math||((()=>"../../../uni_modules/uni-rate/components/uni-rate/uni-rate.js")+(()=>"../../../uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput.js")+(()=>"../../../uni_modules/uni-icons/components/uni-icons/uni-icons.js"))();const n={options:{styleIsolation:"shared"}},t=Object.assign(n,{__name:"rate-info",props:{orderId:String,doctorId:String,hasEvaluate:{type:Boolean,default:!1},evaluateDoc:{type:Object,default:{}}},setup(n){const t=n,a=e.ref({score:t.evaluateDoc.score,content:t.evaluateDoc.content,anonymousFlag:t.evaluateDoc.anonymousFlag||0}),u=e.ref(t.hasEvaluate),s=e.computed((()=>{var e;return(null==(e=a.value.content)?void 0:e.length)||0})),l=e.computed((()=>a.value.score));async function r(){const{code:n,data:s,message:l}=await o.evaluateDoctorApi({docId:t.doctorId,orderId:t.orderId,...a.value});if(1e4!==n)return e.index.utils.toast(l);e.index.utils.toast("感谢您的评价！"),u.value=!0}function i(){console.log(1111),a.value.anonymousFlag=Math.abs(a.value.anonymousFlag-1)}return(o,n)=>e.e({a:e.o((e=>a.value.score=e)),b:e.p({size:28,margin:"12",modelValue:a.value.score}),c:e.o((e=>a.value.content=e)),d:e.p({type:"textarea",maxlength:"150","input-border":!1,styles:{backgroundColor:"#f6f6f6"},"placeholder-style":"font-size: 28rpx; color: #979797",placeholder:"请描述您对医生的评价或是在医生看诊过程中遇到的问题",modelValue:a.value.content}),e:e.t(e.unref(s)),f:!u.value},u.value?{}:e.e({g:a.value.anonymousFlag},a.value.anonymousFlag?{h:e.p({size:"16",color:"#16C2A3",type:"checkbox-filled"})}:{i:e.p({size:"16",color:"#d1d1d1",type:"circle"})},{j:e.o(i)}),{k:!u.value},u.value?{}:{l:!e.unref(l),m:e.o(r)})}});wx.createComponent(t);
