"use strict";const e=require("../../common/vendor.js"),t=require("../../services/doctor.js");if(require("../../utils/http.js"),require("../../stores/user.js"),!Array){(e.resolveComponent("uni-icons")+e.resolveComponent("custom-tabs")+e.resolveComponent("custom-sticky")+e.resolveComponent("scroll-page"))()}Math||((()=>"../../uni_modules/uni-icons/components/uni-icons/uni-icons.js")+(()=>"../../components/custom-tabs/custom-tabs.js")+(()=>"../../components/custom-sticky/custom-sticky.js")+o+s+(()=>"../../components/scroll-page/scroll-page.js"))();const s=()=>"./components/feed-list.js",o=()=>"./components/doctor-list.js",r={__name:"index",setup(s){const{safeAreaInsets:o}=e.index.getSystemInfoSync(),r=e.ref(0),n=e.reactive([{label:"推荐",type:"recommend",current:1,list:[],hasMore:!0,rendered:!0},{label:"关注",type:"like",current:1,list:[],hasMore:!0,rendered:!1},{label:"减脂",type:"fatReduction",current:1,list:[],hasMore:!0,rendered:!1},{label:"饮食",type:"food",current:1,list:[],hasMore:!0,rendered:!1}]),c=e.computed((()=>n[r.value].type)),a=e.computed((()=>n[r.value].current)),u=e.ref(5),i=e.ref([]);function l({index:e}){r.value=e,n[e].rendered||d(),n[e].rendered=!0}function p(){n[r.value].hasMore&&d()}async function d(){const{code:s,data:o,message:i}=await t.feedListApi({type:c.value,current:a.value,pageSize:u.value});if(1e4!==s)return e.index.utils.toast(i);o.rows.forEach((e=>{e.content=e.content.replace(/<[^>]+>/g,"")}));const l=n[r.value].list;n[r.value].list=[...l,...o.rows];const p=n[r.value].current;n[r.value].current=p+1,n[r.value].hasMore=p+1<=o.pageTotal}return d(),async function(){const{code:s,data:o,message:r}=await t.doctorListApi();if(1e4!==s)return e.index.utils.toast(r);i.value=o.rows}(),(t,s)=>({a:e.unref(o).top+"px",b:e.p({size:"22",color:"#C3C3C5",type:"search"}),c:e.o(l),d:e.p({list:n}),e:e.p({"offset-top":e.unref(o).top+"px"}),f:-e.unref(o).top+"px",g:"recommend"===e.unref(c),h:e.p({list:i.value}),i:e.f(n,((t,s,o)=>e.e({a:t.rendered},t.rendered?{b:"cc4f997c-5-"+o+",cc4f997c-0",c:e.p({list:t.list})}:{},{d:t.type,e:r.value===s}))),j:-48+e.unref(o).top+"px",k:e.o(p)})}};wx.createPage(r);
