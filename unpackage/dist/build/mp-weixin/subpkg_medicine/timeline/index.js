"use strict";const t=require("../../common/vendor.js"),e=require("../../services/medicine.js");if(require("../../utils/http.js"),require("../../stores/user.js"),!Array){t.resolveComponent("uni-icons")()}Math;const i={__name:"index",props:{id:String},setup(i){const s=i,a=t.ref([]),u=t.ref([]),n=t.ref({}),o=t.ref({});let l=0;const c=t.index.getMenuButtonBoundingClientRect();function r(){t.index.navigateBack({delta:1})}return l=c.top-(50-c.height)/2+"px",async function(){const{code:i,data:l,message:c}=await e.logisticsApi(s.id);if(1e4!==i)return t.index.utils.toast(c);o.value=l;const r=l.logisticsInfo[0],d=l.logisticsInfo[l.logisticsInfo.length-1];u.value=[{id:1,latitude:r.latitude,longitude:r.longitude,iconPath:"/static/images/start.png",width:25,height:30},{id:2,latitude:d.latitude,longitude:d.longitude,iconPath:"/static/images/end.png",width:25,height:30}],t.Ds.callFunction({name:"qq-maps",data:{from:Object.values(r).join(","),to:Object.values(d).join(",")},success({result:t}){const e=t.result.routes[0].polyline,i=[];for(let a=2;a<e.length;a++)e[a]=Number(e[a-2])+Number(e[a])/1e6;for(let a=0;a<e.length;a+=2)i.push({latitude:e[a],longitude:e[a+1]});const s=i[100];n.value=s,u.value.push({id:3,latitude:s.latitude,longitude:s.longitude,iconPath:"/static/images/car.png",width:50,height:30}),a.value.push({points:i,color:"#16c2a3",width:5})},fail(t){console.log(t)}})}(),(e,i)=>({a:a.value,b:u.value,c:n.value.latitude,d:n.value.longitude,e:t.o(r),f:t.t(o.value.statusValue),g:t.unref(l),h:t.t(o.value.statusValue),i:t.t(o.value.estimatedTime),j:t.t(o.value.name),k:t.t(o.value.awbNo),l:t.f(o.value.list,((e,i,s)=>t.e({a:e.status<=3},(e.status,{}),{b:4===e.status},4===e.status?{c:"8731c084-0-"+s,d:t.p({color:"#2cb5a5","custom-prefix":"iconfont",type:"icon-truck"})}:{},{e:5===e.status},5===e.status?{f:"8731c084-1-"+s,g:t.p({color:"#2cb5a5","custom-prefix":"iconfont",type:"icon-checked"})}:{},{h:t.t(e.statusValue),i:t.t(e.content),j:t.t(e.createTime),k:e.id})))})}};wx.createPage(i);
